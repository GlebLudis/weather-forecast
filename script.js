!function(){"use strict";function e(e,n,t,r,a,c,o){try{var i=e[c](o),u=i.value}catch(e){return void t(e)}i.done?n(u):Promise.resolve(u).then(r,a)}function n(n){return function(){var t=this,r=arguments;return new Promise((function(a,c){var o=n.apply(t,r);function i(n){e(o,a,c,i,u,"next",n)}function u(n){e(o,a,c,i,u,"throw",n)}i(void 0)}))}}function t(){return(t=n(regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=document.querySelector("input"),(t=document.querySelector("form")).addEventListener("submit",(function(e){e.preventDefault(),document.querySelector(".map").innerHTML="",document.querySelector(".weather-form").innerHTML="";var r=n.value,a="https://api.openweathermap.org/data/2.5/weather?q=".concat(r,"&appid=").concat("20a60a7e129c650ce2044325518adef8","&units=metric");fetch(a).then((function(e){return e.json()})).then((function(e){var n=e.main,t=e.name,r=e.weather,a=document.createElement("div"),c=document.createElement("div");document.createElement("li").classList.add("city");var o="https://openweathermap.org/img/wn/".concat(r[0].icon,"@2x.png");a.innerHTML="<img \n        src=https://open.mapquestapi.com/staticmap/v5/map?key=".concat("unGTODaBI2fnVlu7XPcaeSj5ndG28d5k","&center=").concat(t,'&size400,400px=@2x\n        width="200" height="200">'),c.innerHTML='\n         <h2 class="city-name" data-name="'.concat(t,'">\n         <span>').concat(t,'</span>\n         </h2>\n          <div class="city-temp">').concat(Math.round(n.temp),'<sup>°C</sup></div>\n          <img class="city-icon" src=').concat(o," alt=").concat(r[0].main,">\n          <figcaption>").concat(r[0].description,"</figcaption>\n        </div>\n        "),document.querySelector(".map").appendChild(a),document.querySelector(".weather-form").appendChild(c);var i=localStorage.getItem("Cities"),u=JSON.parse(i);u.length>3&&u.splice(0,1);var s=JSON.stringify(t).split('"').join(""),p=u.includes(s);!0===p?console.error("Ok"):!1===p&&(u.push(s),localStorage.setItem("Cities",JSON.stringify(u))),console.log(u);var m="";u.forEach((function(e){m+='<option value="'.concat(e,'" />')})),document.getElementById("data-list").innerHTML=m})),t.reset(),n.focus()}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(e,n,t,r,a,c,o){try{var i=e[c](o),u=i.value}catch(e){return void t(e)}i.done?n(u):Promise.resolve(u).then(r,a)}const a=function(){var e,n=(e=regeneratorRuntime.mark((function e(){var n,t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://ipapi.co/json/");case 2:return n=e.sent,e.next=5,n.json();case 5:return t=e.sent,r=t.city,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(a,c){var o=e.apply(n,t);function i(e){r(o,a,c,i,u,"next",e)}function u(e){r(o,a,c,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();function c(e,n,t,r,a,c,o){try{var i=e[c](o),u=i.value}catch(e){return void t(e)}i.done?n(u):Promise.resolve(u).then(r,a)}const o=function(){var e,n=(e=regeneratorRuntime.mark((function e(){var n,t,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="20a60a7e129c650ce2044325518adef8",e.next=3,a();case 3:return t=e.sent,r="https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&appid=").concat(n,"&units=metric"),e.next=7,fetch(r);case 7:return c=e.sent,e.abrupt("return",c.json());case 9:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){c(o,r,a,i,u,"next",e)}function u(e){c(o,r,a,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();function i(e,n,t,r,a,c,o){try{var i=e[c](o),u=i.value}catch(e){return void t(e)}i.done?n(u):Promise.resolve(u).then(r,a)}function u(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var c=e.apply(n,t);function o(e){i(c,r,a,o,u,"next",e)}function u(e){i(c,r,a,o,u,"throw",e)}o(void 0)}))}}function s(){return(s=u(regeneratorRuntime.mark((function e(){var n,t,r,a,c,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:(n=e.sent).main,t=n.name,n.weather,null==localStorage.getItem("Cities")?(r=[],a=JSON.stringify(t),c=a.split('"').join(""),r.push(c),localStorage.setItem("Cities",JSON.stringify(r))):(i="",u=localStorage.getItem("Cities"),JSON.parse(u).forEach((function(e){i+='<option value="'.concat(e,'" />')})),document.getElementById("data-list").innerHTML=i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,n,t,r,a,c,o){try{var i=e[c](o),u=i.value}catch(e){return void t(e)}i.done?n(u):Promise.resolve(u).then(r,a)}function m(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var c=e.apply(n,t);function o(e){p(c,r,a,o,i,"next",e)}function i(e){p(c,r,a,o,i,"throw",e)}o(void 0)}))}}document.addEventListener("DOMContentLoaded",m(regeneratorRuntime.mark((function e(){var n,t,r,a,c,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:n=e.sent,t=n.main,r=n.name,a=n.weather,document.querySelector(".map").innerHTML="",document.querySelector(".weather-form").innerHTML="",c=document.createElement("div"),i=document.createElement("div"),c.innerHTML="<img \n    src=https://open.mapquestapi.com/staticmap/v5/map?key=".concat("unGTODaBI2fnVlu7XPcaeSj5ndG28d5k","&center=").concat(r,'&size=200,200@2x\n        width="200" height="200">'),u="https://openweathermap.org/img/wn/".concat(a[0].icon,"@2x.png"),i.innerHTML='\n         <h2 class="city-name" data-name="'.concat(r,'">\n         <span>').concat(r,'</span>\n         </h2>\n          <div class="city-temp">').concat(Math.round(t.temp),'<sup>°C</sup></div>\n          <img class="city-icon" src=').concat(u," alt=").concat(a[0].main,">\n          <figcaption>").concat(a[0].description,"</figcaption>\n        </div>\n        "),document.querySelector(".map").appendChild(c),document.querySelector(".weather-form").appendChild(i);case 14:case"end":return e.stop()}}),e)})))),function(){s.apply(this,arguments)}(),function(){t.apply(this,arguments)}()}();